!function(){"use strict";var e={510:function(e,t,l){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=n(l(196));t.default=function(e){var t=e.height||"150px";return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:t,viewBox:"0 -20 540 540",preserveAspectRatio:"xMidYMid",className:"tay-logo"},a.default.createElement("path",{className:"cls-1",d:"M406.34,134.12c-15.2-41.57-61-55.32-75.34-61.62-89.91-39.58-174.57,27.55-180,32-65.95,54.09-90.94,153.9-52,236,34.59,72.92,110,111.6,180,112,5.88,0,134.84-.61,142-88,0,0-.54-218-2-345.72-1-87.28-152-90.28-154,13V544.64C263.38,859-317.18,90.48,49,82.5c12.14-.26,47.84,0,47.84,0H589c70,3,143.88,7.13,118,73C685,211.5,480,335.5,406.34,134.12Z"}),a.default.createElement("path",{className:"cls-2",d:"M647,83.5l-550.16-1H39.71C-288,79.5,434,598.5,473,454.5c4.06-23.88,9-56.69,13-96,7.11-70.09,2.88-79.38,0-84-27.44-44-171.07-12.12-195,1-93,51,208.33,247.51,335,190C732.93,417,854,80.5,647,83.5Z"}))}},501:function(e,t,l){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=n(l(510));t.default=a.default},977:function(e,t,l){var n=this&&this.__spreadArray||function(e,t,l){if(l||2===arguments.length)for(var n,a=0,r=t.length;a<r;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};t.__esModule=!0;var a=l(196);t.default=function(e){for(var t,l=[],r=1;r<arguments.length;r++)l[r-1]=arguments[r];var c=e.name,o=e.initialIndex||0,i=(0,a.useState)(l[o]),s=i[0],u=i[1];return n([(t={},t["data-".concat(c,"-state")]=s,t),function(e){return function(){return u(e)}}],l.map((function(e){return e===s})),!0)}},196:function(e){e.exports=window.React}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,l),r.exports}l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){l.r(n),l.d(n,{Component:function(){return U},Context:function(){return P},actions:function(){return t},useAuthStore:function(){return M}});var e={};l.r(e),l.d(e,{password:function(){return _},sendCode:function(){return S},verify:function(){return N}});var t={};l.r(t),l.d(t,{deleteAccount:function(){return y},init:function(){return w},login:function(){return b},logout:function(){return C},register:function(){return x},reset:function(){return e}});var a=l(196),r=l.n(a);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},c.apply(this,arguments)}var o=l(977),i=l.n(o),s=l(501),u=l.n(s),d=l.g.AUTH_API_BASE_URL||"";class m extends r().Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){console.error(e,t)}render(){return this.state.hasError?r().createElement("p",null,"Oops, something went wrong."):this.props.children}}function v(){return r().createElement("svg",{viewBox:"0 0 14222 14222",width:"14px",height:"14px"},r().createElement("circle",{cx:"7111",cy:"7112",r:"7111",fill:"#1977f3"}),r().createElement("path",{d:"M9879 9168l315-2056H8222V5778c0-562 275-1111 1159-1111h897V2917s-814-139-1592-139c-1624 0-2686 984-2686 2767v1567H4194v2056h1806v4969c362 57 733 86 1111 86s749-30 1111-86V9168z",fill:"#fff"}))}function p(){return r().createElement("svg",{viewBox:"0 0 16 16",width:"14px",height:"14px"},r().createElement("path",{fill:"black",fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}))}function E(){return r().createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 533.5 544.3"},r().createElement("path",{d:"M533.5 278.4c0-18.5-1.5-37.1-4.7-55.3H272.1v104.8h147c-6.1 33.8-25.7 63.7-54.4 82.7v68h87.7c51.5-47.4 81.1-117.4 81.1-200.2z",fill:"#4285f4"}),r().createElement("path",{d:"M272.1 544.3c73.4 0 135.3-24.1 180.4-65.7l-87.7-68c-24.4 16.6-55.9 26-92.6 26-71 0-131.2-47.9-152.8-112.3H28.9v70.1c46.2 91.9 140.3 149.9 243.2 149.9z",fill:"#34a853"}),r().createElement("path",{d:"M119.3 324.3c-11.4-33.8-11.4-70.4 0-104.2V150H28.9c-38.6 76.9-38.6 167.5 0 244.4l90.4-70.1z",fill:"#fbbc04"}),r().createElement("path",{d:"M272.1 107.7c38.8-.6 76.3 14 104.4 40.8l77.7-77.7C405 24.6 339.7-.8 272.1 0 169.2 0 75.1 58 28.9 150l90.4 70.1c21.5-64.5 81.8-112.4 152.8-112.4z",fill:"#ea4335"}))}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,l]=(0,a.useState)(e);return[t,e=>l(e.target.value)]}const f=(e,t)=>fetch(e,t).then((e=>e.ok?e.json():e.json().then((t=>{throw new Error(t.error||e.statusText)}))));var g={post:(e,t)=>f(d+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include",mode:"cors"}),get(e,t){const l=new URL(d+e);return l.search=new URLSearchParams(t).toString(),f(l.href,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors"})},put:e=>f(d+e,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors"}),delete:e=>f(d+e,{method:"DELETE",credentials:"include",mode:"cors"})},y=async e=>{let{commit:t}=e;t({type:"loading"});try{await g.delete("/user"),t({type:"logout"})}catch(e){t({type:"error",payload:e.message})}},w=async e=>{let{commit:t}=e;t({type:"loading"});try{t({type:"set-user",payload:await g.get("/verify")})}catch(e){t({type:"logout"})}},b=(e,t)=>async l=>{let{commit:n}=l;n({type:"loading"});try{n({type:"set-user",payload:await g.post("/login",{email:e,password:t})})}catch(e){n({type:"error",payload:e.message})}},C=async e=>{let{commit:t}=e;t({type:"loading"});try{await g.put("/logout"),t({type:"logout"})}catch(e){t({type:"error",payload:e.message})}},x=(e,t)=>async l=>{let{commit:n}=l;n({type:"loading"});try{n({type:"set-user",payload:await g.post("/register",{email:e,password:t})})}catch(e){n({type:"error",payload:e.message})}};const S=e=>async t=>{let{commit:l}=t;l({type:"reset-loading"});try{await g.post("/reset-password",{email:e}),l({type:"set-reset-state",payload:"verify"})}catch(e){l({type:"error",payload:e.message})}},N=(e,t)=>async l=>{let{commit:n}=l;n({type:"reset-loading"});try{await g.get("/reset-password/verify",{email:e,code:t}),n({type:"set-reset-state",payload:"password"})}catch(e){n({type:"error",payload:e.message})}},_=(e,t,l)=>async n=>{let{commit:a}=n;a({type:"reset-loading"});try{await g.post("/reset-password/reset",{email:e,code:t,password:l}),a({type:"set-reset-state",payload:"success"})}catch(e){a({type:"error",payload:e.message})}};var R=(e,t)=>{let{type:l,payload:n}=t;switch(l){case"loading":return{...e,loading:!0,error:void 0};case"set-user":return{...e,loading:!1,error:void 0,user:n};case"error":return{...e,loading:!1,error:n,reset:{...e.reset,loading:!1}};case"logout":return{...e,loading:!1,user:void 0,error:void 0};case"reset-loading":return{...e,error:void 0,reset:{...e.reset,loading:!0}};case"set-reset-state":return{...e,reset:{...e.reset,loading:!1,state:n}};default:return{...e}}};const T={loading:!1,reset:{loading:!1,state:"initial"}};function M(){return function(e,t){const[l,n]=(0,a.useReducer)(e,t);return[l,n,e=>{e({state:l,commit:n})}]}(R,T)}const P=(0,a.createContext)([T,()=>{},()=>{}]);function L(){return r().createElement("div",{className:"spinner spinner-sm"},r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)))}function k(){return r().createElement("div",{className:"spinner"},r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("p",null,"Loading..."),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)),r().createElement("div",null,r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null),r().createElement("div",null)))}function O(e){const{LOGIN:t,REGISTER:l,RESET:n}=e,[{reset:o},,s]=(0,a.useContext)(P),[u,d]=h(),[m,v]=h(),[p,E]=h(),[f,g,y,w,C]=i()({name:"reset"},"initial","verify","password","success");return(0,a.useEffect)(g(o.state),[o.state]),r().createElement("form",c({},f,{onSubmit:e=>{if(e.preventDefault(),t&&s(b(u,m)),l)return s(x(u,m));if(n){if(y)return s(S(u));if(w)return s(N(u,p));if(C)return s(_(u,p,m))}},className:"tay-local"}),r().createElement("label",{"data-prov":"local",htmlFor:"email","data-reset":"!success"},"Email Address"),r().createElement("input",{"data-prov":"local","data-reset":"!success",placeholder:"Enter your email",required:!0,id:"email",onChange:d,type:"email",disabled:n&&!y}),r().createElement("p",{"data-prov":"local","data-auth":"reset","data-reset":"verify"},"Check your email for a one time code and enter it here:"),r().createElement("label",{htmlFor:"code","data-prov":"local","data-auth":"reset","data-reset":"verify password"},"One-time Code"),r().createElement("input",{"data-prov":"local","data-auth":"reset","data-reset":"verify password",placeholder:"Enter one-time code",required:n&&w,id:"code",type:"password",onChange:E,disabled:!w}),r().createElement("label",{htmlFor:"password","data-prov":"local","data-reset":"password"},n&&"New "," Password"),r().createElement("input",{"data-prov":"local",placeholder:"Enter password",required:t||l||C,id:"password","data-reset":"password",onChange:v,minLength:6,type:"password"}),r().createElement("label",{"data-prov":"local",htmlFor:"confirm-password","data-auth":"!login","data-reset":"password"},"Confirm Password"),r().createElement("input",c({"data-prov":"local",placeholder:"Confirm password",required:l,id:"confirm-password","data-auth":"!login","data-reset":"password",type:"password",pattern:m},{ref(e){e&&(e.addEventListener("invalid",(()=>e.setCustomValidity("Passwords do not match"))),e.addEventListener("input",(()=>e.setCustomValidity(""))))}})),r().createElement("input",{"data-prov":"local","data-auth":"login",type:"submit",value:"Login"}),r().createElement("input",{"data-prov":"local",type:"submit",value:"Register","data-auth":"register"}),o.loading&&r().createElement(L,null),!o.loading&&r().createElement("input",{"data-prov":"local",type:"submit",value:"Reset Password","data-auth":"reset","data-reset":"initial"}),!o.loading&&r().createElement("input",{"data-prov":"local",type:"submit",value:"Verify Code","data-auth":"reset","data-reset":"verify"}),!o.loading&&r().createElement("input",{"data-prov":"local",type:"submit",value:"Change Password","data-auth":"reset","data-reset":"password"}),r().createElement("h3",{"data-auth":"reset","data-reset":"success"},"Success!"),r().createElement("p",{"data-auth":"reset","data-reset":"success"},"Your password has been changed"))}const j=e=>{if(!d)return"";const t=new URL(`${d}/${e}`),l=new URLSearchParams({redirect:location.href});return t.search=l.toString(),t.href};var A=function(e){const{children:t,google:l,github:n,facebook:a}=e,o=!!t,[s,d,h,f,g]=i()({name:"auth"},"login","register","reset"),[y,w,b,C]=i()({name:"prov"},"local","external");return r().createElement("div",c({className:"tay-login"},s,y),o?r().createElement(m,null,t):r().createElement("div",{className:"header"},r().createElement(u(),{height:"32px"}),r().createElement("h3",null,"Tay Login")),r().createElement("nav",null,r().createElement("button",{id:"login",type:"button",onClick:d("login"),className:C?"selected expanded":h?"selected":""},"Login",C?"/Register":""),r().createElement("button",{type:"button","data-prov":"local",onClick:d("register"),id:"register",className:"disappear "+(f?"selected":"")},"Register"),r().createElement("button",{type:"button",onClick:()=>{d("reset")(),w("local")()},className:g?"selected":"'"},"Reset Password")),r().createElement("nav",{"data-auth":"!reset"},r().createElement("button",{type:"button",onClick:w("local"),className:b?"selected":""},"Local"),r().createElement("button",{type:"button",onClick:w("external"),className:C?"selected":""},"Use Provider:",l&&r().createElement(E,null),n&&r().createElement(p,null),a&&r().createElement(v,null))),r().createElement(O,{LOGIN:h,REGISTER:f,RESET:g}),r().createElement("div",{className:"providers"},l&&r().createElement("a",{className:"provider","data-prov":"external",href:j("google")},r().createElement(E,null)," Sign in with Google"),n&&r().createElement("a",{className:"provider","data-prov":"external",href:j("github")},r().createElement(p,null)," Sign in with Github"),a&&r().createElement("a",{className:"provider","data-prov":"external",href:j("facebook")},r().createElement(v,null)," Sign in with Facebook")))};function G(e){const{children:t}=e,l=!!t,[{user:n},,c]=(0,a.useContext)(P);return r().createElement("div",{className:"tay-user"},l?r().createElement(m,null,t):r().createElement("div",{className:"default"},r().createElement("h3",null,"Welcome, ",n?n.email:"","!"),r().createElement("p",null,"Signed in",(()=>{switch(n?n.provider:""){case"google":return" with Google";case"github":return" with Github";default:return" locally"}})()),r().createElement("div",{className:"content"},r().createElement("p",null,"You are now signed in."))),r().createElement("div",{className:"actions"},r().createElement("button",{onClick:()=>c(C)},"Sign out"),r().createElement("button",{onClick:()=>{confirm("Are you sure you want to delete your account?")&&c(y)}},"Delete account")))}function H(e){const[t,,l]=(0,a.useContext)(P),{loading:n,user:o,error:s}=t,{Header:u,Account:d,google:m,github:v,facebook:p}=e;(0,a.useEffect)((()=>l(w)),[]),(0,a.useEffect)((()=>{s&&alert(s)}),[s]);const[E,h]=i()({name:"page"},"loading","login","user"),f=n?"loading":o?"user":"login";return(0,a.useEffect)(h(f),[n,o]),r().createElement("div",c({},E,{className:"tay-auth"}),r().createElement("div",{"data-page":"user"},r().createElement(G,null,d&&r().createElement(d,null))),r().createElement("div",{"data-page":"loading"},r().createElement(k,null)),r().createElement("div",{"data-page":"login"},r().createElement(A,{google:m,github:v,facebook:p},u&&r().createElement(u,null))))}const U=e=>r().createElement(m,null,r().createElement(H,e))}(),window.TayAuth=n}();